<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portfolio</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="script.js" defer></script>
    
    <!-- Font Awesome for icons -->
    <!-- Prism.js for syntax highlighting -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js" defer></script>
</head>
<body>
    <header>
        <nav class="navbar">
            <div class="logo">Portfolio</div>
            <ul class="nav-links">
                <li><a href="#projects">DungeonHelper</a></li>
                <li><a href="#code-examples">Koodit</a></li>
                <li><a href="#learning-diary">Aikajana</a></li>
                <li><a href="#contact">Yhteystiedot</a></li>
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </nav>
    </header>

    <main>

        <section id="projects" class="projects">
            <div class="project-showcase">
              
                <div class="project-details">
                    <div class="project-intro">
                        <h3>DungeonHelper</h3>
                        <p class="project-tagline">Ultimaattinen kumppani p√∂yt√§roolipelien monimutkaiseen ja j√§nnitt√§v√§√§n maailmaan.</p>
                    </div>

                    <div class="project-description">
                        <p>Olitpa kokenut pelinjohtaja tai uusi pelaaja, DungeonHelper on suunniteltu parantamaan pelikokemustasi tarjoamalla kattavan valikoiman ty√∂kaluja ja resursseja.</p>
                    </div>

                    <div class="project-story">
                        <h4>Konseptista Todellisuuteen: DungeonHelperin Tarina</h4>
                        <blockquote>
                            <p>"Olen ollut omistautunut pelinjohtaja viimeiset kahdeksan vuotta, ja olen oppinut paljon pelinjohtamisen taiteesta. Yksi suurimmista haasteistani on ollut hajanaisten ajatusteni hallinta. Aika, joka kuluu monien taulukoiden, kaavioiden ja sen vaikeasti l√∂ydett√§v√§n s√§√§nt√∂kirjan sivun etsimiseen, olisi voitu k√§ytt√§√§ paremmin pelin sujuvuuden yll√§pit√§miseen.</p>
                            <p>Vaikka saatavilla on lukuisia roolipelisovelluksia, harvat tarjoavat kaikki ne kattavat ominaisuudet, joita itse kaipaan. T√§m√§ johti DungeonHelperin luomiseen. DungeonHelper on suunniteltu pelinjohtajille, ja se tarjoaa nopean p√§√§syn kaikkiin taulukoihisi, kaavioihisi ja muuhun, eliminoiden tarpeen selata sivuja ja muistiinpanoja."</p>
                            <footer>- Nojonen</footer>
                        </blockquote>
                    </div>

                    <div class="reflection-card">
                        <h3>üé≠ Roolit ja Vastuut</h3>
                        <ul>
                            <li>Product Owner</li>
                            <li>FullStack-kehitt√§j√§</li>
                        </ul>
                    </div>
    
                    <div class="reflection-card">
                        <h3>üìà Osaamisen Kehittyminen</h3>
                        
                        <div class="skills-progress">
                            <div class="skill-area">
                                <h4>Frontend (Angular)</h4>
                                <div class="skill-metrics">
                                    <div class="metric">
                                        <span>Alkutaso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 50%">5/10</div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <span>Tavoitetaso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 80%">8/10</div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <span>Nykyinen taso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 70%">7/10</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
                            <div class="skill-area">
                                <h4>Backend (Express.js)</h4>
                                <div class="skill-metrics">
                                    <div class="metric">
                                        <span>Alkutaso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 60%">6/10</div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <span>Tavoitetaso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 80%">8/10</div>
                                        </div>
                                    </div>
                                    <div class="metric">
                                        <span>Nykyinen taso:</span>
                                        <div class="progress-bar">
                                            <div class="progress" style="width: 70%">7/10</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tech-stack">
                        <h4>Teknologiat</h4>
                        <div class="tech-tags">
                            <span class="tech-tag"><i class="fab fa-angular"></i>Angular</span>
                            <span class="tech-tag"><i class="fab fa-node-js"></i>Node.js</span>
                            <span class="tech-tag"><i class="fas fa-database"></i>MongoDB</span>
                            <span class="tech-tag"><i class="fab fa-js"></i>TypeScript</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        
        <section id="learnings" class="learnings-section">
            <h2>Oivallukset ja oppimiskokemukset</h2>
            <div class="learnings">
                <p>Projektin aikana opin paljon uutta, muun muassa Angularin ja Express.js:n perusteita, sek√§ MongoDB:n k√§ytt√∂√§.</p>
                <p>Kokonaiskuva siit√§ miten FullStack -sovellus toteutetaan, miten se kannattaa suunnitella ja mit√§ seikkoja tulee heti alkuun ottaa huomioon.</p>
                <p>Yksi t√§rkeimmist√§ oivalluksista oli ymm√§rt√§√§, miten Angularin komponentit ja Express.js:n reitit toimivat yhdess√§.</p>
                <p>T√§m√§n projektin aikana olen oppinut my√∂s, miten dokumentoida koodia ja yll√§pit√§√§ oppimisp√§iv√§kirjaa, vaikka sen suhteellisen my√∂h√§√§n aloitinkin.</p>
            </div>
        </section>

        
        <section id="goals" class="goals-section">
            <h2 style="text-align: center;">Tavoitteet</h2>
            <div class="goals" style="display: flex; justify-content: center;">
                <div class="goal-column" style="margin: 0 20px;">
                    <h3>Toteutuneet tavoitteet</h3>
                    <div class="goals-list">
                        <div class="goal">
                            <i class="fas fa-check-circle"></i>
                            <span>Sovellus py√∂rii AWS√§ss√§</span>
                        </div>
                        <div class="goal">
                            <i class="fas fa-check-circle"></i>
                            <span>Kaksi p√§√§toimintoa (Merchants ja Random Encounters)</span>
                        </div>
                        <div class="goal">
                            <i class="fas fa-check-circle"></i>
                            <span>Autentikaatio</span>
                        </div>
            
                    </div>
                </div>
                <div class="goal-column" style="margin: 0 20px;">
                    <h3>J√§iv√§t toteutumatta</h3>
                    <div class="goals-list">
                        <div class="goal">
                            <i class="fas fa-times-circle"></i>
                            <span>PWA toteutus</span>
                        </div>
                        <div class="goal">
                            <i class="fas fa-times-circle"></i>
                            <span>Testaaminen</span>
                        </div>
                        <div class="goal">
                            <i class="fas fa-times-circle"></i>
                            <span>LocalStorage</span>
                        </div>
                        <div class="goal">
                            <i class="fas fa-times-circle"></i>
                            <span>Useampi toiminto jota alussa kaavailtiin (Loot tables, Quest givers)</span>
                        </div>
                      
                    </div>
                </div>
            </div>
        </section>

        
        <section id="learnings-outside-plan" class="learnings-outside-plan-section">
            <h2 style="text-align: center;">Mit√§ opin suunitelman ulkopuolelta?</h2>
            <div class="learnings-outside-plan">
                <div style="display: flex; justify-content: space-around; align-items: center;">
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-server" style="font-size: 50px; margin-right: 10px;"></i>
                        <p>MongoDB Atlas -palvelun k√§ytt√∂</p>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-tasks" style="font-size: 50px; margin-right: 10px;"></i>
                        <p>Product Ownerin hommat: Projektin johtaminen, aikataulussa pysyminen ja dokumentointi</p>
                    </div>
                    <div style="display: flex; align-items: center;">
                        <i class="fas fa-user-friends" style="font-size: 50px; margin-right: 10px;"></i>
                        <p>Ihmistaidot ja kommunikaation t√§rkeys</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="future-plans" class="future-plans-section">
            <h2 style="text-align: center;">Tulevaisuus</h2>
            <div class="future-plans" style="display: flex; justify-content: center; align-items: center;">
                <p style="text-align: center;">
                    Haluaisin tulevaisuudessa sijoittua FullStack -kehitt√§j√§ksi. Opintojakso on antanut minulle hyv√§n pohjan t√§h√§n tavoitteeseen.
                </p>
                <p style="text-align: center;">
                    Opintojakso on auttanut minua kehitt√§m√§√§n taitojani Angularissa, Express.js:ss√§ ja MongoDB:ss√§. Lis√§ksi opin miten yksinkertainen autentikaatio toteutetaan.
                </p>
                <p style="text-align: center;">
                    Kehitett√§v√§√§: Frontend ja Backendin perusasioissa viel√§ edelleen kehitett√§v√§√§, vaikka olen saanut t√§lt√§ opintojaksolta hyv√§n pohjan FullStack -kehitt√§j√§ksi, koen silti viel√§ ett√§ perusjuttuja tulisi silti viel√§ hioa.
                </p>
            </div>
        </section>

        <section id="strengths" class="strengths-section">
            <h2>Omia vahvuuksia</h2>
            <div class="strengths" style="display: flex; justify-content: center; align-items: center;">
                <p style="text-align: center;">
                    Angular ja Express.js ovat minun vahvuuksiani t√§ll√§ hetkell√§.
                </p>
        </section>

        <section id="why-these-works" class="why-these-works-section">
            <h2>Miksi valitsin juuri n√§m√§ dokumentit/ty√∂t portfoliooni?</h2>
            <div class="why-these-works">
                <p>
                    Valitsin n√§m√§ dokumentit/ty√∂t, koska niiss√§ k√§y ilmi ty√∂ni hedelm√§t. 
                </p>
            </div>
        </section>

        <section id="code-examples-2" class="code-examples-section">
            <h2>Vanhat koodiesimerkit</h2>
            <div class="code-examples">
                <!-- Merchants Category -->
                <div class="feature-category">
                    <h3>Random Encounters</h3>
                    <div class="code-example">

                        <div class="code-header" onclick="toggleCode('old-addEnc')">
                            <h4>Add Encounter (Frontend)</h4>
                            <div class="code-actions">
                                <button class="copy-btn" onclick="copyCode('old-addEnc', event)">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="code-content" id="old-addEnc">
                            <div class="window-controls">
                                <span class="control close"></span>
                                <span class="control minimize"></span>
                                <span class="control maximize"></span>
                            </div>
                            <pre><code class="language-typescript">
                                public addEnc(): void {
                                    if (this.filteredEncounters && this.filteredEncounters._id) {
                                      this.eservice
                                        .addEnc(this.filteredEncounters._id, this.newEncounter)
                                        .subscribe(
                                          (response) => {
                                            this.filteredEncounters.enc.push(
                                              response.enc[response.enc.length - 1]
                                            );
                                            this.resetForm();
                                            this.closeAddEncounterModal();
                                          },
                                          (error) => console.error('Error adding encounter:', error)
                                        );
                                    } else {
                                      console.warn(
                                        'No valid encounter to add. Please select a valid encounter first.'
                                      );
                                    }
                                  }
                            </code></pre>
                        </div>

                    <div class="code-header" onclick="toggleCode('old-saveEnc')">
                        <h4>Save Encounter (Frontend)</h4>
                        <div class="code-actions">
                            <button class="copy-btn" onclick="copyCode('old-saveEnc', event)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="code-content" id="old-saveEnc">
                        <div class="window-controls">
                            <span class="control close"></span>
                            <span class="control minimize"></span>
                            <span class="control maximize"></span>
                        </div>
                        <pre><code class="language-typescript">
                             saveEnc() {
                               if (this.filteredEncounters && this.filteredEncounters.enc) {
                                 this.filteredEncounters.enc.forEach((enc: any) => {
                                   if (enc.isEditing) {
                                     this.eservice
                                       .saveEnc(this.filteredEncounters._id, enc._id, enc)
                                       .subscribe(
                                         (response) => {
                                           console.log('Encounter updated:', response);
                                           enc.isEditing = false; 
                                         },
                                         (error) => {
                                           console.error('Error saving encounter:', error);
                                         }
                                       );
                                   }
                                 });
                               }
                             }
                        </code></pre>

                        
                    </div>

                    <div class="code-header" onclick="toggleCode('old-saveEnc-backend')">
                        <h4>Save Encounter (Backend)</h4>
                        <div class="code-actions">
                            <button class="copy-btn" onclick="copyCode('old-saveEnc-backend', event)">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="code-content" id="old-saveEnc-backend">
                        <div class="window-controls">
                            <span class="control close"></span>
                            <span class="control minimize"></span>
                            <span class="control maximize"></span>
                        </div>
                        <pre><code class="language-typescript">
  saveEnc: async (req, res) => {
    try {
      const { biomeId, encId } = req.params;
      const { name, description, weight, img } = req.body;

      const encounterDoc = await RandomEncounter.findById(biomeId);
      if (!encounterDoc) {
        return res.status(404).json({ message: 'Biome not found' });
      }

      const encounter = encounterDoc.enc.id(encId);
      if (!encounter) {
        return res.status(404).json({ message: 'Encounter not found' });
      }

      encounter.name = name || encounter.name;
      encounter.description = description || encounter.description;
      encounter.weight = weight || encounter.weight;
      encounter.img = img || encounter.img;

      await encounterDoc.save();

      return res
        .status(200)
        .json({ message: 'Encounter updated successfully', encounter });
    } catch (error) {
      console.error(error);
      return res.status(500).json({ message: 'Server error' });
    }
  },
                        </code></pre>
                    </div>
                </div>

          
                        </div>
                    </div>
                </div>
            </div>
        </section>

        
        <section id="code-examples" class="code-examples-section">
            <h2>Loppuliset koodiesimerkit</h2>
            <div class="code-examples">
                <!-- Random Encounters Category -->
                <div class="feature-category">
                    <h3>Random Encounters</h3>
                    
                    <!-- Frontend -->
                    <div class="subcategory">
                        <h4>Frontend</h4>

                        <!-- eservice service-->
                        <div class="code-example">
                            <div class="code-header" onclick="toggleCode('encounters-service')">
                                <h4>Encounter Service</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-service', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="code-content" id="encounters-service">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                      // Hakee kannasta tiedot
                                      public getEncounters(): Observable<RandomEncounters[]> {
                                        return this.http
                                          .get<RandomEncounters[]>(`${this.baseUrl}`, {
                                            headers: this.getHeaders()
                                          })
                                          .pipe(catchError(this.handleError));
                                      }
                                  
                                      public getTable(): Observable<RandomEncounters[]> {
                                        return this.http
                                          .get<RandomEncounters[]>(`${this.baseUrl}`, {
                                            headers: this.getHeaders()
                                          })
                                          .pipe(catchError(this.handleError));
                                      }
                                  
                                      public deleteEnc(biomeId: string, encounterId: string): Observable<any> {
                                        const url = `${this.baseUrl}/${biomeId}/deleteEnc/${encounterId}`;
                                        return this.http
                                          .delete<any>(url, {
                                            headers: this.getHeaders(),
                                          })
                                          .pipe(catchError(this.handleError));
                                      }
                                  
                                      public saveEnc(biomeId: string, encId: string, encData: any): Observable<any> {
                                        return this.http.put(
                                          `${this.baseUrl}/${biomeId}/saveEnc/${encId}`,
                                          encData,
                                          {
                                            headers: this.getHeaders(),
                                          }
                                        ).pipe(catchError(this.handleError));
                                      }...
                                    </code></pre>
                            </div>

                      

                            <div class="code-header" onclick="toggleCode('encounters-frontend-save')">
                                <h4>Save Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-frontend-save', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>
                            <div class="code-content" id="encounters-frontend-save">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                    // ‚úÖ‚úÖ‚úÖ Yhden encounterin tallennus ‚úÖ‚úÖ‚úÖ
                                    saveEnc(enc: any) {
                                      this.eservice
                                        .saveEnc(this.filteredEncounters._id, enc._id, {
                                          ...enc,
                                          die: enc.roll, // P√§ivitet√§√§n nopan arvo
                                        })
                                        .subscribe({
                                          // Jos tallennus onnistuu, ilmoitetaan k√§ytt√§j√§lle
                                          next: (response) => {
                                            this.snackBar.open('Encounter saved successfully!', 'Close', {
                                              duration: 3000,
                                              panelClass: ['mat-snackbar-success'],
                                            });
                                            enc.isEditing = false; // Poistetaan edit-tila kun ollaan muokattu jotain
                                          },
                                          // Ep√§onnistuessa ilmoitetaan virheilmoitus
                                          error: (error) => {
                                            console.error('Error saving encounter:', error);
                                            this.snackBar.open(
                                              'Error saving encounter: ' + (error.message || 'Unknown error'),
                                              'Close',
                                              {
                                                duration: 3000,
                                                panelClass: ['mat-snackbar-error'],
                                              }
                                            );
                                          }
                                        });
                                    }
                                    </code></pre>
                            </div>

                            <div class="code-header" onclick="toggleCode('encounters-frontend-add')">
                                <h4>Add Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-frontend-add', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>
                            <div class="code-content" id="encounters-frontend-add">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                        // ‚ûï‚ûï‚ûï Encounterin lis√§ys ‚ûï‚ûï‚ûï //

                        public addEnc(result: any): void {
                          console.log('addEnc() called with result:', result);
                          if (!result.name) {
                            console.log('Encounter name is required');
                            this.snackBar.open('Encounter name is required', 'Close', {
                              duration: 3000,
                              panelClass: ['mat-snackbar-error'],
                            });
                          } else {
                            if (this.filteredEncounters && this.filteredEncounters._id) {
                              console.log('Filtered encounters and ID exist');
                              this.eservice
                                .addEnc(this.filteredEncounters._id, {
                                  ...result,
                                  die: result.roll,
                                })
                                .subscribe(
                                  (response) => {
                                    console.log('Encounter added:', response);
                                    console.log('RULLA', result.roll);
                                    console.log('Uusi enkki', this.availableDice);
                                    this.getEncounters();
                                    this.snackBar.open('Encounter added successfully!', 'Close', {
                                      duration: 3000,
                                      panelClass: ['mat-snackbar-success'],
                                    });
                                  },
                                  (error) => {
                                    console.error('Error adding encounter:', error);
                                    this.snackBar.open(
                                      'Error adding encounter: ' + error.message,
                                      'Close',
                                      {
                                        duration: 3000,
                                        panelClass: ['mat-snackbar-error'],
                                      }
                                    );
                                  }
                                );
                            } else {
                              console.log('Valid encounter not selected');
                              this.snackBar.open('Please select a valid encounter first', 'Close', {
                                duration: 3000,
                                panelClass: ['mat-snackbar-warning'],
                              });
                            }
                          }
</code></pre>
                            </div>

                            <div class="code-header" onclick="toggleCode('encounters-frontend-delete')">
                                <h4>Delete Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-frontend-delete', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>
                            <div class="code-content" id="encounters-frontend-delete">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                    // ‚ùå‚ùå‚ùå Encounterin poisto ‚ùå‚ùå‚ùå
                                    deleteEnc(biomeId: string, encounterId: string): void {
                                      console.log('deleteEnc() called with:', biomeId, encounterId);
                                      console.log('Current filteredEncounters:', this.filteredEncounters);
                                  
                                      this.eservice.deleteEnc(biomeId, encounterId).subscribe(
                                        (response) => {
                                          console.log('Encounter deleted successfully:', response);
                                  
                                          this.filteredEncounters.enc = this.filteredEncounters.enc.filter(
                                            (enc: any) => enc._id !== encounterId
                                          );
                                  
                                          console.log('Updated filteredEncounters:', this.filteredEncounters);
                                        },
                                        (error) => {
                                          console.error('Error occurred while deleting encounter:', error);
                                        }
                                      );
                                    }
                                    </code></pre>
                            </div>

                        
                        </div>
                    </div>

                    <!-- Backend -->
                    <div class="subcategory">
                        <h4>Backend</h4>
                        <div class="code-example">
                            <div class="code-header" onclick="toggleCode('encounters-backend-save')">
                                <h4>Save Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-backend-save', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>
                            <div class="code-content" id="encounters-backend-save">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                    async saveEnc(req, res) {
                                        console.log('Updating encounter for biome:', req.params.biomeId);
                                        console.log('Encounter ID:', req.params.encId);
                                        console.log('Request body:', req.body);
                                    
                                        try {
                                          // Etsii biomen ID;n perusteella
                                          const biome = await RandomEncounter.findById(req.params.biomeId);
                                          if (!biome) {
                                            console.log('Biome not found');
                                            return res.status(404).json({ error: 'Biome not found' });
                                          }
                                    
                                          // Etsii kohtaamisen ensin ID;ll√§
                                          let encounterIndex = biome.enc.findIndex(
                                            (e) => e._id.toString() === req.params.encId
                                          );
                                    
                                          // ...jos sit√§ ei l√∂ydy sitten nimell√§
                                          if (encounterIndex === -1 && req.body.name) {
                                            encounterIndex = biome.enc.findIndex((e) => e.name === req.body.name);
                                          }
                                    
                                          if (encounterIndex === -1) {
                                            console.log('Update failed - encounter not found');
                                            return res.status(404).json({ error: 'Encounter not found' });
                                          }
                                    
                                         
                                          // P√§ivitt√§√§ kohtaamisen
                                          biome.enc[encounterIndex] = {
                                            _id: req.body._id,
                                            name: req.body.name,
                                            description: req.body.description,
                                            weight: req.body.weight,
                                            roll: req.body.roll,
                                            img: req.body.img,
                                          };
                                    
                                          const savedBiome = await biome.save();
                                          console.log('Update successful');
                                          res.json(savedBiome);
                                        } catch (error) {
                                          console.error('Error updating encounter:', error);
                                          res.status(500).json({ error: 'Error updating encounter' });
                                        }
                                    }</code></pre>
                            </div>

                            <div class="code-header" onclick="toggleCode('encounters-backend-add')">
                                <h4>Add Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-backend-add', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>

                            <div class="code-content" id="encounters-backend-add">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                    
                                    async addEnc(req, res) {
                                        try {
                                            console.log('Lis√§t√§√§n encounter', req.body);
                                    
                                            // Luodaan uusi enkountteri
                                            const newEncounter = {
                                                name: req.body.name,
                                                description: req.body.description,
                                                weight: req.body.weight,
                                                img: req.body.img,
                                            };
                                    
                                            console.log('Uus enkountter:', newEncounter);
                                    
                                            // P√§ivitet√§√§n RandomEncounter-dokumentti lis√§√§m√§ll√§ uusi encounter enc-taulukkoon
                                            const updatedEncounter = await RandomEncounter.findByIdAndUpdate(
                                                req.params.id, // Haetaan RandomEncounter-dokumentti biomin ID:n perusteella URL:sta
                                                { $push: { enc: newEncounter } }, // Lis√§t√§√§n uusi encounter enc-taulukkoon
                                                { new: true } // Palautetaan p√§ivitetty dokumentti
                                            );
                                    
                                            console.log('P√§ivitetty encounter:', updatedEncounter);
                                            if (!updatedEncounter) {
                                                return res.status(404).json({ error: 'Biomea ei l√∂ytynyt' });
                                            }
                                            res.json(updatedEncounter); // Palautetaan p√§ivitetty dokumentti, jossa uusi encounter
                                        } catch (err) {
                                            console.error('Virhe encounterin lis√§√§misess√§:', err);
                                            res.status(500).json({ error: 'Virhe encounterin lis√§√§misess√§' });
                                        }
                                    }
                                </code></pre>
                            </div>

                            <div class="code-header" onclick="toggleCode('encounters-backend-delete')">
                                <h4>Delete Encounter</h4>
                                <div class="code-actions">
                                    <button class="copy-btn" onclick="copyCode('encounters-backend-delete', event)">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                    <span class="expand-icon">‚ñº</span>
                                </div>
                            </div>
                            
                            <div class="code-content" id="encounters-backend-delete">
                                <div class="window-controls">
                                    <span class="control close"></span>
                                    <span class="control minimize"></span>
                                    <span class="control maximize"></span>
                                </div>
                                <pre><code class="language-typescript">
                                    async deleteById(req, res) {
                                      try {
                                        console.log('Deleting encounter:', req.params.id);
                                        const deletedEnc = await RandomEncounter.findOneAndDelete({ _id: req.params.id });
                                        
                                        if (!deletedEnc) {
                                          return res.status(404).json({ error: 'Encounter not found' });
                                        }
                                        
                                        res.json({ message: 'Encounter deleted successfully' });
                                      } catch (error) {
                                        console.error('Error deleting encounter:', error);
                                        res.status(500).json({ error: 'Error deleting encounter' });
                                      }
                                    }
                                </code></pre>
                            </div>

                            
                            </div>
                        </div>
                    </div>
                </div>

          
                        </div>
                    </div>
                </div>
            </div>

            <!-- Merchants Category -->
            <div class="feature-category">
                <h3>Merchants</h3>
                
                <!-- Frontend -->
                <div class="subcategory">
                    <h4>Frontend</h4>
                    <div class="code-example">
                        <div class="code-header" onclick="toggleCode('merchants-frontend')">
                            <h4>Create Merchant</h4>
                            <div class="code-actions">
                                <button class="copy-btn" onclick="copyCode('merchants-frontend', event)">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="code-content" id="merchants-frontend">
                            <div class="window-controls">
                                <span class="control close"></span>
                                <span class="control minimize"></span>
                                <span class="control maximize"></span>
                            </div>
                            <pre><code class="language-typescript">
createMerchant(result: any): void {
// Tarkistaa onko kauppiaan nimi annettu jos ei niin annetaan virheilmoitus
if (!result.name) {
    console.log('Table name is required');
    this.snackBar.open('Table name is required', 'Close', {
        duration: 2000,
        panelClass: ['mat-snackbar-error'],
    });
    return;
}
// L√§hetet√§√§n kauppiaan tiedot palvelimelle
this.merchantService.createMerchant(result).subscribe({
    next: (response) => {
        console.log('Merchant created successfully:', response);
        // Hakee p√§ivitetyn listan kauppiaista
        this.getMerchants();
        // Onnistuu
        this.snackBar.open('Merchant created successfully!', 'Close', {
            duration: 2000,
            panelClass: ['mat-snackbar-success'],
        });
    },
    // Virheilmoitus jne
    error: (error) => {
        console.error('Error creating merchant:', error);
        this.snackBar.open('Error creating merchant', 'Close', {
            duration: 2000,
            panelClass: ['mat-snackbar-error'],
        });
    }
});
}</code></pre>
                        </div>
                    </div>
                </div>

                <!-- Backend -->
                <div class="subcategory">
                    <h4>Backend</h4>
                    <div class="code-example">
                        <div class="code-header" onclick="toggleCode('merchants-backend')">
                            <h4>Create Merchant</h4>
                            <div class="code-actions">
                                <button class="copy-btn" onclick="copyCode('merchants-backend', event)">
                                    <i class="fas fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        <div class="code-content" id="merchants-backend">
                            <div class="window-controls">
                                <span class="control close"></span>
                                <span class="control minimize"></span>
                                <span class="control maximize"></span>
                            </div>
                            <pre><code class="language-typescript">
async createMerchant(req, res) {
try {
    const { name, type } = req.body;
    console.log('Request body:', req.body);

    // Alustetaan ett√§ typesArray on aina taulukko riippumatta siit√§, onko type alunperin annettu taulukkona vai yksitt√§isen√§ arvona
    const typesArray = Array.isArray(type) ? type : [type];

    // Aggregaatilla tarkoitetaan tietojen k√§sittely√§ sek√§ analysointia kokoelmasta k√§ytt√§en "agregointiputkea"
    // T√§ss√§ tapauksessa Item kokoelma aggregoituu sample-metodilla, joka valitsee 10 satunnaista rivi√§
    const randomItems = await Item.aggregate([
        { $match: { type: { $in: typesArray } } },
        { $sample: { size: 10 } },
    ]);

    console.log('Random items selected:', randomItems);

    // Luodaan kauppias uudella satunnaisesti luodulla inventaariolla
    const newMerchant = await Merchant.create({
        name,
        inventory: randomItems.map((item) => item._id),
    });

    console.log('New merchant created:', newMerchant);
    // K√§ytet√§√§n populate-metodia hakeaksemme item kokoelmasta tietoa ja liitt√§√§ ne merchants kokoelmaan
    const populatedMerchant = await Merchant.findById(
        newMerchant._id
    ).populate('inventory');

    console.log('Populated merchant:', populatedMerchant);

    res.status(201).json(populatedMerchant);
} catch (error) {
    res.status(500).json({
        error: 'Error creating merchant',
    });
}
},</code></pre>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
        </section>

        

        
        <div class="project-header">
            <h3>Kuva galleria</h3>
            <div class="gallery">
                <div class="gallery-row">
                    <figure class="gallery-item">
                        <img src="../Kuvat/proto_biomes.png" alt="Biomien listaus" class="gallery-image" style="display:block;margin:0 auto;">
                      
                    </figure>
                </br>
                    <figure class="gallery-item">
                        <img src="../Kuvat/roll1.png" alt="Rolli" class="gallery-image" style="display:block;margin:0 auto;">
                    
                    </figure>
                </br>
                    <figure class="gallery-item">
                        <img src="../Kuvat/Lopputilanne_biomes.png" alt="Biomien listaus 2" class="gallery-image" style="display:block;margin:0 auto;">
                        
                    </figure>
                </br>
                    <figure class="gallery-item">
                        <img src="../Kuvat/Lopputilanne_highway.png" alt="Maantie" class="gallery-image" style="display:block;margin:0 auto;">
                      
                    </figure>
                </br>
                    <figure class="gallery-item">
                        <img src="../Kuvat/Lopputilanne_roll.png" alt="Rolli2" class="gallery-image" style="display:block;margin:0 auto;">
                       
                    </figure>
                </div>
            </div>
        </div>


        <section id="learning-diary" class="learning-diary">
            <div class="header">
                <h3>Projektin aikajana</h3>

            </div>

            <div class="timeline">

                <div class="timeline-item">
                    <div class="timeline-date">
                        <h3>Syyskuu-Lokakuu 2024</h3>
                    </div>
                    <div class="timeline-content">
                        <h4>Viikko 38 - Projektin aloitus</h4>
                        <h5>üèóÔ∏è P√§√§komponenttien luonti</h5>
                        <ul>
                            <li>Toteutettu projektin perusrakenne:
                                <ul>
                                    <li>Navbar-komponentti</li>
                                    <li>Highway-komponentti (my√∂hemmin uudelleennimetty)</li>
                                    <li>Valetietokanta kuntoon</li>
                                </ul>
                            </li>
                            <li><strong>Haaste:</strong> Biome-tietojen n√§ytt√§minen valetietokannasta</li>
                            <li><strong>Ratkaisu:</strong> Dynaaminen toteutus
                                <ol>
                                    <li>Sivusto listaa biomet ID:n perusteella</li>
                                    <li>ID:t√§ klikkaamalla p√§√§see uudelle sivulle</li>
                                    <li>Uusi sivu n√§ytt√§√§ biomin sis√§ll√∂n</li>
                                </ol>
                            </li>
                        </ul>

                        <h4>Viikko 39</h4>
                        <p>Valtion virallinen kertausharjoitus</p>

                        <h4>Viikko 40 - Modaalit ja tietokantaintegraatio</h4>
                        <ul>
                            <li>Enctable-komponentin modaalit:
                                <ul>
                                    <li>Nopanheiton tulosten n√§ytt√§minen</li>
                                    <li>Satunnaisten kohtaamisten esitt√§minen</li>
                                    <li>Yksitt√§isten kohtaamisten tarkastelu</li>
                                </ul>
                            </li>
                            <li>MongoDB Atlas -migraatio:
                                <ul>
                                    <li>Docker-riippuvuudesta luovuttu</li>
                                    <li>Yhteys tietokantaan pilvipalvelun kautta</li>
                                </ul>
                            </li>
                            <li>CRUD-operaatioiden toteutus:
                                <ul>
                                    <li>Edit-toiminnallisuus</li>
                                    <li>Delete-toiminnallisuus</li>
                                </ul>
                            </li>
                        </ul>

                        <h4>Viikko 41 - Demoviikko</h4>
                        <ul>
                        <li>Random Encountersin Save/Edit/Delete-toiminnallisuudet</li>
                        <li>1. Demoon valmistautuminen</li>
                        </ul>

                        <h4>Viikko 43 - Uusi sprintti</h4>
                        <ul>
                            <li>Demo 1sen palautteen perusteella keskitytty responsiivisuuden parantamiseen</li>
                            <li>T√§m√§ viikko meni Random Encounters toiminnon korjauksissa</li>
                    </ul>
                    <h4>Viikko 44 - Uusi toiminto "Merchants"</h4>
                        <ul>
                            <li>CRUD -operaatiot uudelle toiminnolle</li>
                            <ul>
                                <li>Merchantsin listaus</li>
                                <li>Merchantsin luonti</li>
                                <li>Merchantsin poisto</li>
                            </ul>
                            <li><strong>Haaste:</strong> Kahden kokoelman yhdist√§minen palvelimella</li>
                            <li><strong>Ratkaisu:</strong> Aggregaatio!
                    </ul>
                    </div>
                </div>


                <div class="timeline-item">
                    <div class="timeline-date">
                        <h3>Marraskuu 2024</h3>
                    </div>
                    <div class="timeline-content">
                        <h4>Viikko 45 - Demo 2</h4>
                        <ul>
                            <li>2. Demoon valmistautuminen</li>
                            <li>Demo 2sen palaute: Keskityt√§√§n t√§st√§ l√§htien vain kahteen toimintoon</li>
                            <ul>    <li>Merchants</li>
                            <li>Random Encounters</li></ul>    
                        </ul>
                        <h4>Viikko 46 - Uusi sprintti</h4>
                        <ul>
                            <li>Random Encounters toimminon hiomista</li>
                            <ul>
                                <li>Responsiivsuus</li>
                                <li>Save Encounter riesana</li>
                            </ul>
                        </ul>
                        
                        <h4>Viikko 47 - Encountereiden tallennus</h4>
                        <p>üéØ <strong>Saavutus:</strong> Encountereiden tallennus saatu toimivaksi pitk√§n ty√∂st√§misen j√§lkeen.</p>

                        <h4>22.11.2024 - Demo ja palaute</h4>
                        <p>üéì <strong>Demo-arvosana:</strong> 3</p>
    
                    </div>
                </div>

                <div class="timeline-item">
                    <div class="timeline-date">
                        <h3>Joulukuu 2024</h3>
                    </div>
                    <div class="timeline-content">
                        <h4>Viikko 48</h4>
                        <p> <strong>Kertausharjoitus</strong></p>
                        <h4>Viikko 49 - Loppujutut</h4>
                        <ul>
                            <li>AWS</li>
                            <li>Loppuraportti</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>


        <section id="reflection" class="reflection">
            <h2>üéØ Loppureflektio</h2>

       

                <div class="reflection-card">
                    <h3>üí≠ Yhteenveto</h3>
                    <p>N√§in j√§lkeenp√§in kun katson koko projektin aikajanaa, huomaan ett√§ olen suurimmaksi osaksi py√∂rinyt Random Encounters -toiminallisuuden parissa. T√§m√§ ei kuitenkaan tarkoita, ett√§ olisin j√§√§nyt polkemaan paikallaan - p√§invastoin. Jokainen viikko toi mukanaan uusia haasteita ja oppimiskokemuksia. V√§lill√§ tuntui turhauttavalta, kun juuri korjattu toiminnallisuus lakkasi toimimasta muiden muutosten my√∂t√§, tai kun jouduin painimaan samojen ongelmien parissa useaan otteeseen.</p>
                    
                    <p>Projektin aikana opin kantap√§√§n kautta, miten t√§rke√§√§ on dokumentoida ratkaisut ja muutokset huolellisesti. Monesti l√∂ysin itseni tilanteesta, jossa olin yksin debuggaamassa ongelmaa ilman selke√§√§ suuntaa. Vaikka n√§m√§ tilanteet olivat haastavia, ne opettivat minulle paljon ongelmanratkaisusta ja siit√§, miten t√§rke√§√§ on pilkkoa isot ongelmat pienemmiksi, hallittaviksi palasiksi.</p>
                    
                    <p>Vaikka aikajanasta voisi p√§√§tell√§ edistymisen olleen hidasta, jokainen takaisku ja uudelleenyritt√§minen kasvatti teknist√§ osaamistani ja ymm√§rryst√§ni full-stack kehityksest√§. T√§m√§ projekti opetti minulle my√∂s sen, ett√§ joskus "yksinkertaiset" toiminnallisuudet voivat osoittautua monimutkaisiksi, kun ne integroidaan osaksi isompaa kokonaisuutta.</p>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <h2>Ota yhteytt√§</h2>
            <div class="contact-content">
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p>ac9194@student.jamk.fi</p>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-linkedin"></i>
                        <p>LinkedIn profiili</p>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-github"></i>
                        <p>GitHub profiili</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; Jaakon 2025 Portfolio. Kaikki oikeudet pid√§tet√§√§n :)</p>
    </footer>
</body>
</html>
